function angleinput(d,a){function f(b,a,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c}function n(){for(var b=arguments[0],a=arguments.length-1;0<a;a--){var c=arguments[a],d;for(d in c)"object"==typeof c[d]?b[d]=n(b[d]||{},c[d]):"undefined"==typeof b[d]&&(b[d]=c[d])}return b}function j(){var b=n({},a.style,(g?a.draggingstyle:p?a.hoveredstyle:{})||{}),e=a.angle0-k;a.clockwise&&(e=2*Math.PI-e);e-=2*Math.PI*parseInt(0.5*e/Math.PI);with(q)clearRect(0,
0,c.width,c.height),save(),beginPath(),arc(a.x,a.y,a.bgrad,0,2*Math.PI),fillStyle=b.bgfill,lineWidth=b.bglinewidth,strokeStyle=b.bgstroke,fill(),stroke(),beginPath(),moveTo(a.x,a.y),arc(a.x,a.y,a.rad,a.angle0,e,!a.clockwise),closePath(),fillStyle=b.fill,lineWidth=b.linewidth,strokeStyle=b.stroke,fill(),stroke(),beginPath(),moveTo(a.x+a.axisrad*Math.cos(a.angle0),a.y+a.axisrad*Math.sin(a.angle0)),lineTo(a.x,a.y),lineTo(a.x+a.axisrad*Math.cos(e),a.y+a.axisrad*Math.sin(e)),strokeStyle=b.axisstroke,lineWidth=
b.axislinewidth,stroke(),restore()}function h(a){0>a&&(a=2*Math.PI+a);k=a-2*Math.PI*parseInt(0.5*a/Math.PI);d&&"INPUT"==d.tagName.toUpperCase()&&(d.value=180*k/Math.PI,"createEvent"in document?(a=document.createEvent("HTMLEvents"),a.initEvent("change",!1,!0),d.dispatchEvent(a)):d.fireEvent("onchange"));j()}function l(b){var e;b.touches?(e=b.touches[0].clientX,b=b.touches[0].clientY):"undefined"!=typeof b.x&&"undefined"!=typeof b.y?(e=b.x,b=b.y):(e=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,
b=b.clientY+document.body.scrollTop+document.documentElement.scrollTop);e-=c.offsetLeft;b-=c.offsetTop;return[e-a.x,b-a.y]}function m(b){var c=0;parseInt(b[0]+0.5);c=0==parseInt(b[1]+0.5)?a.angle0+(0>b[0]?Math.PI:0):a.angle0-Math.atan2(b[1],b[0]);a.clockwise&&(c=2*Math.PI-c);return c}a||(a={});d||(d=document.body.firstChild);var g=!1,p=!1,k="undefined"!=typeof a.value?parseFloat(a.value):0.789*Math.PI,c=document.createElement("canvas"),q;a.size&&("undefined"==typeof a.rad&&(a.rad=0.5*a.size/1.61803398875),
"undefined"==typeof a.bgrad&&(a.bgrad=a.rad/1.61803398875),"undefined"==typeof a.axisrad&&(a.axisrad=0.5*a.size));n(a,{size:64,rad:24,bgrad:14.832815729996513,axisrad:32,angle0:0,clockwise:!0,deg:!0,style:{stroke:"rgba(0,0,255,0.5)",fill:"rgba(0,0,255,0.4)",linewidth:1,bgstroke:"#aaaaaa",bgfill:"#dddddd",bglinewidth:1,axislinewidth:1,axisstroke:"black"},draggingstyle:{stroke:"blue",fill:"rgba(0,0,255,0.7)",axislinewidth:2},hoveredstyle:{stroke:"blue",fill:"rgba(0,0,255,0.5)"}});a.x=a.y=a.size/2+0.5;
c&&c.getContext&&(q=c.getContext("2d"),c.width=a.size,c.height=a.size,d.parentNode.insertBefore(c,d),this.setValue=h,f("mousedown",c,function(a){g=!0;h(m(l(a)))}),f("mousemove",c,function(a){g&&h(m(l(a)))}),f("mouseup",c,function(){g=!1;j()}),f("mouseover",c,function(){p=!0;j()}),f("mouseout",c,function(){p=g=!1;j()}),f("touchstart",c,function(a){g=!0;h(m(l(a)));a.preventDefault()}),f("touchmove",c,function(a){g&&h(m(l(a)))}),f("touchend",c,function(a){g=!1;j();a.preventDefault()}),h(k))};
